{% comment %} 
 * -------------------------------------------------------------------------------
 * Filename:     addUpdate_modal.html
 * Author:       Andrew Laing
 * Email:        parisianconnections@gmail.com
 * Last updated: 01/12/2019.
 * Description:  This is used to create the addUpdate modal.

 * Note:         Files which include this modal must extend base.html.
 * -------------------------------------------------------------------------------
{% endcomment %} 

{% load static %}
<!-- START OF #addUpdateModal -->
<div class="modal fade" id="addUpdateModal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- MODAL HEADER-->
      <div class="modal-header addUpdate-modal-header">
        <!-- Close button -->
        <button type="button" class="close" data-dismiss="modal">&times;</button>  
        <h3>Add new update here</h3>
      </div>

      <!-- MODAL BODY-->
      <div class="modal-body addUpdate-modal-body">
        <form role="form" name="frmAddUpdate" id="frmAddUpdate" action="javascript:void(0);">
          {% csrf_token %}
          <div class="form-group">
            <label for="postTitle">Title</label>
            <br />
            <input type="text" class="form-control" id="postTitle" name="postTitle" 
                   placeholder="Enter a unique title for your post ..." maxlength="34" required>
            <br />

            <label for="postText">Text</label>
            <br />
            <textarea placeholder="Enter post text" rows="7" class="form-control" id="postText" 
                   name="postText" maxlength="254" required></textarea>
            <br />

            <label for="postTags">Tags</label>
            <br />

            <div id="tagDiv">
              <input type="text" class="form-control" id="postTags" name="postTags" data-role="tagsinput" maxlength="49"/>
            </div>    
            
            <!-- Script used for tag suggestions  -->
            <script>
              var tagnames = new Bloodhound({
                  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
                  queryTokenizer: Bloodhound.tokenizers.whitespace,
                  prefetch: {
                    url: "{% static 'tellings/data/tagNames.json' %}",
                    filter: function(list) {
                      return $.map(list, function(tagname) {
                        return { name: tagname }; });
                    }
                  }
                });

                tagnames.initialize();

                  $('#tagDiv').tagsinput({
                    typeaheadjs: {
                      name: 'tagnames',
                      displayKey: 'name',
                      valueKey: 'name',
                      source: tagnames.ttAdapter()
                    }
                });
            </script>
          </div>
          <div class="modal-login-btn">
            <button type="button" class="btn btn-success btn-block" id="addNewUpdatePostBtn" 
                    value="postBtn" >Post Update</button>
            <br />
          </div>      
          <div class="modal-login-btn">
            <button type="button" class="btn btn-danger btn-block" data-dismiss="modal">Cancel</button> 
          </div>     

        </form>
      </div>

    </div> <!-- End of .modal-content -->
  </div>   <!-- End of .modal-dialog -->
</div>     <!-- End of #addUpdateModal -->   
